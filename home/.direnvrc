use_python() {
  local PYTHON_VENV_ROOT=$HOME/.venv/python/versions/$1
  if [ ! -d ${PYTHON_VENV_ROOT} ]; then
    CFLAGS="-I$(xcrun --show-sdk-path)/usr/include" pyenv install -v $1
    $HOME/.venv/python/versions/$1/bin/pip install --upgrade pip
    $HOME/.venv/python/versions/$1/bin/pip install virtualenv
  fi

  load_prefix "$PYTHON_VENV_ROOT"
  layout_python "$PYTHON_VENV_ROOT/bin/python"
}

use_terraform() {
  local TERRAFORM_VENV_ROOT=$HOME/.venv/terraform/versions/$1
  if [ ! -d ${TERRAFORM_VENV_ROOT} ]; then
    curl -o /tmp/terraform.zip https://releases.hashicorp.com/terraform/$1/terraform_$1_darwin_amd64.zip
    mkdir -p ${TERRAFORM_VENV_ROOT}/bin/
    unzip /tmp/terraform.zip -d ${TERRAFORM_VENV_ROOT}/bin/
  fi

  load_prefix "$TERRAFORM_VENV_ROOT"
}

use_nodejs() {
  local NODEJS_VENV_ROOT=$HOME/.venv/nodejs/versions/$1
  if [ ! -d ${NODEJS_VENV_ROOT} ]; then
    mkdir -p $NODEJS_VENV_ROOT
    curl -fsSL http://nodejs.org/dist/v$1/node-v$1-darwin-x64.tar.gz | tar xvz --strip 1 -C $NODEJS_VENV_ROOT
  fi

  load_prefix "$NODEJS_VENV_ROOT"
}
